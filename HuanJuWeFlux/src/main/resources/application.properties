spring.application.name=HuanJuWeFlux

# ==================== Flyway 配置 ====================
# 启用 Flyway
spring.flyway.enabled=true
# 对已有数据库进行基线
spring.flyway.baseline-on-migrate=true
# 基线版本
spring.flyway.baseline-version=0
# 迁移脚本位置
spring.flyway.locations=classpath:db/migration
# 记录迁移历史的表名
spring.flyway.table=flyway_schema_history
# 迁移前验证
spring.flyway.validate-on-migrate=true
# 生产环境禁止 clean
spring.flyway.clean-disabled=true
# 编码
spring.flyway.encoding=UTF-8

# R2DBC初始化配置（如果想让Spring自动建表，可以开启）
# 控制是否执行 schema.sql/data.sql 脚本 可选：always, embedded, never
spring.sql.init.mode=never
# 控制 R2DBC 是否自动初始化数据库
spring.r2dbc.initialization-mode=never

# ==================== JDBC 数据源（给 Flyway 使用）====================
spring.datasource.url=jdbc:mysql://localhost:3306/huan_ju_flux?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8mb4&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# R2DBC MySQL 配置
spring.r2dbc.url=r2dbc:mysql://localhost:3306/huan_ju_flux?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8mb4
spring.r2dbc.username=root
spring.r2dbc.password=password
spring.r2dbc.pool.initial-size=10
spring.r2dbc.pool.max-size=30
spring.r2dbc.pool.max-idle-time=30m

# Redis 配置
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.database=0
spring.data.redis.timeout=5000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# JWT 配置
jwt.secret=huanju-secret-key-2024-spring-boot-webflux-reactive
jwt.expiration=86400000
jwt.issuer=HuanJuWeFlux

# 日志配置
logging.level.org.springframework.data.r2dbc=DEBUG
logging.level.jieyi.lu=DEBUG
logging.level.org.springframework.boot.context.config=DEBUG
# 开启 Flyway DEBUG 日志
logging.level.org.flywaydb=DEBUG
logging.level.org.springframework.boot.autoconfigure.flyway=DEBUG

# 开启数据源 DEBUG 日志
logging.level.org.springframework.jdbc.datasource=DEBUG

# WebFlux 配置
# spring.webflux.base-path=/api

# 服务器配置
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

# 日期格式化
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=GMT+8

# R2DBC连接池配置
spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.max-create-connection-time=10s
spring.r2dbc.pool.max-acquire-time=10s




